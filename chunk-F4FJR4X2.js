import{a as ae}from"./chunk-BRLTEGVK.js";import{a as X,b as Y}from"./chunk-PUXZHG7T.js";import{d as Z,f as ee,h as te,i as ie,j as ne,k as re,l as oe}from"./chunk-77WBGPGO.js";import"./chunk-WWHFYV7U.js";import{l as K,m as Q}from"./chunk-K6M7XUUE.js";import"./chunk-QWCOXO5I.js";import{C as x}from"./chunk-KIQAA2AV.js";import{a as J,e as q}from"./chunk-YNM2VMUH.js";import{a as W,b as B,c as F}from"./chunk-OT326MI4.js";import"./chunk-TYGDPCEK.js";import"./chunk-EMG2U767.js";import{b as $}from"./chunk-E2327SGY.js";import{$a as U,Fb as G,Tb as v,cb as A,fb as j,nb as H,pb as R}from"./chunk-FA57PY74.js";import{Ba as c,Ca as p,Ld as O,Nb as a,Ob as s,Pb as N,Tb as z,Td as u,Wb as g,Yb as d,ad as V,bd as P,cb as I,fc as l,gb as o,gc as h,hb as M,hc as w,jd as k,lc as f,mc as S,nc as y,oc as L,pc as E,ra as T,sd as D,vb as C,zb as _}from"./chunk-UXOUDVEV.js";function me(m,n){if(m&1){let e=z();a(0,"input",21),y("ngModelChange",function(i){c(e);let r=d().$implicit;return S(r.url,i)||(r.url=i),p(i)}),s()}if(m&2){let e=d().$implicit;f("ngModel",e.url)}}function le(m,n){if(m&1&&N(0,"img",22),m&2){let e=d().$implicit;_("src",e.icon,I)}}function ce(m,n){if(m&1){let e=z();a(0,"a",23),g("nzOnConfirm",function(){c(e);let i=d().index,r=d();return p(r.handleDelete(i))}),l(1),s()}if(m&2){let e=d(2);_("nzPopconfirmTitle",e.$t("_confirmDel")),o(),w(" ",e.$t("_del")," ")}}function pe(m,n){if(m&1){let e=z();a(0,"tr")(1,"td",6)(2,"input",7),y("ngModelChange",function(i){let r=c(e).$implicit;return S(r.name,i)||(r.name=i),p(i)}),s()(),a(3,"td",8),C(4,me,1,1,"input",9),s(),a(5,"td",10),C(6,le,1,1,"img",11),a(7,"input",12),y("ngModelChange",function(i){let r=c(e).$implicit;return S(r.icon,i)||(r.icon=i),p(i)}),s(),a(8,"app-upload",13),g("onChange",function(i){let r=c(e).index,se=d();return p(se.onChangeUpload(i,r))}),s()(),a(9,"td",8)(10,"input",14),y("ngModelChange",function(i){let r=c(e).$implicit;return S(r.placeholder,i)||(r.placeholder=i),p(i)}),s()(),a(11,"td",15)(12,"nz-switch",16),y("ngModelChange",function(i){let r=c(e).$implicit;return S(r.blocked,i)||(r.blocked=i),p(i)}),s()(),a(13,"td",17)(14,"a",18),g("click",function(){let i=c(e).index,r=d();return p(r.moveUp(i))}),l(15),s(),a(16,"a",19),g("click",function(){let i=c(e).index,r=d();return p(r.moveDown(i))}),l(17),s(),C(18,ce,2,2,"a",20),s()()}if(m&2){let e=n.$implicit,t=d();o(2),f("ngModel",e.name),o(2),_("ngIf",!e.isInner),o(2),_("ngIf",e.icon),o(),f("ngModel",e.icon),o(3),f("ngModel",e.placeholder),o(2),f("ngModel",e.blocked),o(3),h(t.$t("_moveUp")),o(2),h(t.$t("_moveDown")),o(),_("ngIf",!e.isInner)}}var b=class m{constructor(n,e){this.message=n;this.modal=e}$t=u;searchList=O;submitting=!1;handleAdd(){this.searchList.some(e=>!e.name.trim())||this.searchList.unshift({name:"",url:"",icon:"",placeholder:"",blocked:!1,isInner:!1})}handleDelete(n){this.searchList.splice(n,1)}moveUp(n){if(n===0)return;let e=this.searchList[n],t=this.searchList[n-1];this.searchList[n-1]=e,this.searchList[n]=t}moveDown(n){if(n===this.searchList.length-1)return;let e=this.searchList[n],t=this.searchList[n+1];this.searchList[n+1]=e,this.searchList[n]=t}handleSubmit(){this.submitting||this.modal.info({nzTitle:u("_syncDataOut"),nzOkText:u("_confirmSync"),nzContent:u("_confirmSyncTip"),nzOnOk:()=>{let n={};if(this.searchList.forEach(e=>{e.name.trim()&&(n[e.name]=null)}),Object.keys(n).length!==this.searchList.length){this.message.error(u("_repeatAdd"));return}this.submitting=!0,G({message:"update search",content:JSON.stringify(this.searchList),path:D}).then(()=>{this.message.success(u("_saveSuccess"))}).finally(()=>{this.submitting=!1})}})}trackByItem(n,e){return e.name}onChangeUpload(n,e){this.searchList[e].icon=n.cdn}static \u0275fac=function(e){return new(e||m)(M(v),M(x))};static \u0275cmp=T({type:m,selectors:[["system-tag"]],standalone:!0,features:[L([x,v]),E],decls:25,vars:14,consts:[["basicTable",""],["nz-button","",1,"add-btn",3,"click","nzLoading"],["nz-button","","nzType","primary",3,"click","nzLoading"],[1,"mb12"],[3,"nzData"],[4,"ngFor","ngForOf","ngForTrackBy"],["width","150px"],["nz-input","","maxlength","10",3,"ngModelChange","ngModel"],["width","220px"],["nz-input","",3,"ngModel","ngModelChange",4,"ngIf"],["width","260px",1,"whitespace-nowrap"],["class","icon",3,"src",4,"ngIf"],["nz-input","","type","text",2,"width","180px",3,"ngModelChange","ngModel"],[3,"onChange"],["nz-input","","maxlength","50",3,"ngModelChange","ngModel"],["width","100px"],[3,"ngModelChange","ngModel"],[1,"select-none"],[3,"click"],[1,"ml-2.5",3,"click"],["nz-popconfirm","","nzPopconfirmPlacement","rightTop","nzOkType","danger","nzPopconfirmPlacement","bottom","class","ml-2.5 color-red",3,"nzPopconfirmTitle","nzOnConfirm",4,"ngIf"],["nz-input","",3,"ngModelChange","ngModel"],[1,"icon",3,"src"],["nz-popconfirm","","nzPopconfirmPlacement","rightTop","nzOkType","danger","nzPopconfirmPlacement","bottom",1,"ml-2.5","color-red",3,"nzOnConfirm","nzPopconfirmTitle"]],template:function(e,t){if(e&1){let i=z();a(0,"button",1),g("click",function(){return c(i),p(t.handleAdd())}),l(1),s(),a(2,"button",2),g("click",function(){return c(i),p(t.handleSubmit())}),l(3),s(),a(4,"div",3)(5,"b"),l(6),s()(),a(7,"nz-table",4,0)(9,"thead")(10,"tr")(11,"th"),l(12),s(),a(13,"th"),l(14),s(),a(15,"th"),l(16),s(),a(17,"th"),l(18),s(),a(19,"th"),l(20),s(),a(21,"th"),l(22),s()()(),a(23,"tbody"),C(24,pe,19,9,"tr",5),s()()}e&2&&(_("nzLoading",t.submitting),o(),w(" ",t.$t("_addRow"),`
`),o(),_("nzLoading",t.submitting),o(),w(" ",t.$t("_save"),`
`),o(3),h(t.$t("_buildTip")),o(),_("nzData",t.searchList),o(5),h(t.$t("_engineName")),o(2),h(t.$t("_engineUrl")),o(2),h(t.$t("_icon")),o(2),h(t.$t("_desc")),o(2),h(t.$t("_isDisable")),o(2),h(t.$t("_action")),o(2),_("ngForOf",t.searchList)("ngForTrackBy",t.trackByItem))},dependencies:[R,U,A,H,j,k,V,P,F,B,W,$,oe,ie,Z,ee,re,te,ne,q,J,ae,Y,X,Q,K],styles:[".add-btn[_ngcontent-%COMP%]{margin-bottom:20px;margin-right:20px}.icon[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:10px;object-fit:cover}  #file{vertical-align:middle;margin-left:10px}  #file .anticon{font-size:20px}"]})};export{b as default};
