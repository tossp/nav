import{d as Y,f as Z,h as ee,i as te,j as ne,k as ie,l as oe}from"./chunk-JVBWXFDZ.js";import"./chunk-SXCEXAZO.js";import{l as U,m as X}from"./chunk-JVYO37JM.js";import"./chunk-FQ5YFUYZ.js";import{C}from"./chunk-2DGXHXEQ.js";import{a as q,e as K}from"./chunk-DBZREJ6E.js";import{a as F,b as B,c as W}from"./chunk-VTDBSRUG.js";import"./chunk-FTIBNURH.js";import"./chunk-77T3WOTB.js";import{b as A}from"./chunk-LWCR4GGB.js";import{$a as j,Fb as Q,Tb as x,cb as R,fb as G,nb as H,pb as J}from"./chunk-QPP76R5T.js";import{Ba as g,Ca as f,Hd as $,Nb as r,Nd as I,Ob as o,Tb as h,Ud as u,Wb as v,Yb as d,a as N,b as w,bd as P,cd as L,fc as l,gb as t,gc as c,hb as T,hc as _,kd as O,lc as z,mc as S,nc as b,oc as V,pc as D,ra as E,rd as k,vb as y,zb as p}from"./chunk-XSESNRQO.js";function ae(a,i){if(a&1&&(r(0,"div",6),l(1),o()),a&2){let e=d();t(),_(" ",e.$t("_buildTip"),`
`)}}function me(a,i){if(a&1&&(r(0,"div"),l(1),o()),a&2){let e=d().$implicit;t(),c(e.desc)}}function le(a,i){if(a&1){let e=h();r(0,"input",16),b("ngModelChange",function(m){g(e);let s=d().$implicit;return S(s.desc,m)||(s.desc=m),f(m)}),o()}if(a&2){let e=d().$implicit;z("ngModel",e.desc)}}function se(a,i){if(a&1){let e=h();r(0,"a",17),v("nzOnConfirm",function(){g(e);let m=d().index,s=d();return f(s.handleDelete(m))}),l(1),o()}if(a&2){let e=d(2);p("nzPopconfirmTitle",e.$t("_confirmDel")),t(),_(" ",e.$t("_del")," ")}}function pe(a,i){if(a&1){let e=h();r(0,"tr")(1,"td",7)(2,"input",8),b("ngModelChange",function(m){let s=g(e).$implicit;return S(s.name,m)||(s.name=m),f(m)}),o()(),r(3,"td",9)(4,"input",10),v("change",function(m){let s=g(e).index,re=d();return f(re.onColorChange(m,s))}),o(),l(5),o(),r(6,"td",11),l(7),o(),r(8,"td",12),y(9,me,2,1,"div",13)(10,le,1,1,"input",14),o(),r(11,"td"),y(12,se,2,2,"a",15),o()()}if(a&2){let e=i.$implicit;t(2),z("ngModel",e.name),t(2),p("value",e.color),t(),_(" - ",e.color," "),t(2),c(e.createdAt),t(2),p("ngIf",e.isInner),t(),p("ngIf",!e.isInner),t(2),p("ngIf",!e.isInner)}}var M=class a{constructor(i,e){this.message=i;this.modal=e}$t=u;isSelfDevelop=$;tagList=I;submitting=!1;incrementId=Math.max(...I.map(i=>Number(i.id)))+1;ngOnInit(){}onColorChange(i,e){let n=i.target.value;this.tagList[e].color=n}handleAdd(){this.tagList.some(e=>!e.name.trim())||(this.incrementId+=1,this.tagList.unshift({id:this.incrementId,name:"",createdAt:"",color:"#f50000",desc:"",isInner:!1}))}handleDelete(i){this.tagList.splice(i,1)}handleSubmit(){if(this.submitting)return;let i={};if(this.tagList.forEach(e=>{e.name?.trim?.()&&(i[e.name]=w(N({},e),{name:void 0}))}),Object.keys(i).length!==this.tagList.length){this.message.error(u("_repeatAdd"));return}this.modal.info({nzTitle:u("_syncDataOut"),nzOkText:u("_confirmSync"),nzContent:u("_confirmSyncTip"),nzOnOk:()=>{this.submitting=!0,Q({message:"update tag",content:JSON.stringify(this.tagList),path:k}).then(()=>{this.message.success(u("_saveSuccess"))}).finally(()=>{this.submitting=!1})}})}trackByItem(i,e){return e.id}static \u0275fac=function(e){return new(e||a)(T(x),T(C))};static \u0275cmp=E({type:a,selectors:[["system-tag"]],standalone:!0,features:[V([C,x]),D],decls:21,vars:13,consts:[["basicTable",""],["nz-button","",1,"add-btn",3,"click","nzLoading"],["nz-button","","nzType","primary",3,"click","nzLoading"],["class","mb-4 color-red font-bold",4,"ngIf"],[3,"nzData"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"mb-4","color-red","font-bold"],["width","150px"],["nz-input","","maxlength","10",3,"ngModelChange","ngModel"],["width","160px"],["type","color",3,"change","value"],["width","220px"],["width","200px"],[4,"ngIf"],["nz-input","","maxlength","20",3,"ngModel","ngModelChange",4,"ngIf"],["nz-popconfirm","","nzOkType","danger","nzPopconfirmPlacement","bottom","class","color-red",3,"nzPopconfirmTitle","nzOnConfirm",4,"ngIf"],["nz-input","","maxlength","20",3,"ngModelChange","ngModel"],["nz-popconfirm","","nzOkType","danger","nzPopconfirmPlacement","bottom",1,"color-red",3,"nzOnConfirm","nzPopconfirmTitle"]],template:function(e,n){if(e&1){let m=h();r(0,"button",1),v("click",function(){return g(m),f(n.handleAdd())}),l(1),o(),r(2,"button",2),v("click",function(){return g(m),f(n.handleSubmit())}),l(3),o(),y(4,ae,2,1,"div",3),r(5,"nz-table",4,0)(7,"thead")(8,"tr")(9,"th"),l(10),o(),r(11,"th"),l(12),o(),r(13,"th"),l(14),o(),r(15,"th"),l(16),o(),r(17,"th"),l(18),o()()(),r(19,"tbody"),y(20,pe,13,7,"tr",5),o()()}e&2&&(p("nzLoading",n.submitting),t(),_(" ",n.$t("_addRow"),`
`),t(),p("nzLoading",n.submitting),t(),_(" ",n.$t("_save"),`
`),t(),p("ngIf",!n.isSelfDevelop),t(),p("nzData",n.tagList),t(5),c(n.$t("_tagName")),t(2),c(n.$t("_color")),t(2),c(n.$t("_createAt")),t(2),c(n.$t("_remark")),t(2),c(n.$t("_action")),t(2),p("ngForOf",n.tagList)("ngForTrackBy",n.trackByItem))},dependencies:[J,j,R,H,G,O,P,L,W,B,F,A,K,q,oe,te,Y,Z,ie,ee,ne,X,U],styles:[".add-btn[_ngcontent-%COMP%]{margin-bottom:20px;margin-right:20px}"]})};export{M as default};
