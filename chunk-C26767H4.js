import{a as ct,b as _t,c as dt}from"./chunk-NAXGEWNJ.js";import{a as Re,b as He,d as ot,e as rt,f as at,g as st,h as lt}from"./chunk-YMEXDQAV.js";import{a as it}from"./chunk-YUH4T2BZ.js";import{b as w,d as V}from"./chunk-TZAOAU35.js";import{j as E}from"./chunk-JAVA5N7E.js";import{a as ht}from"./chunk-V5CGM4HR.js";import{a as je,b as qe}from"./chunk-M425UYPC.js";import{a as $e,b as Oe}from"./chunk-56XWEDZC.js";import"./chunk-TCXFUR3W.js";import{a as Ge}from"./chunk-ET6V67KH.js";import{d as Je,e as Ke,f as Ye,g as Qe,h as Xe,i as Ze,j as et,k as tt,l as nt}from"./chunk-Z7D5AM2L.js";import"./chunk-VOQ32IBV.js";import{c as ye,e as ke,i as Ee,j as Ve,k as We,l as Me,m as Ne}from"./chunk-72VJDA5K.js";import"./chunk-YJREVOGQ.js";import{C as Pe,D as Fe,E as Ae,F as Be}from"./chunk-6JEJPFSE.js";import{a as ge,b as Ie,c as Se,e as Te}from"./chunk-LNOVAEUC.js";import{a as se,b as ce,c as _e}from"./chunk-TOFQQBCQ.js";import"./chunk-AJ4R6MQT.js";import{b as De}from"./chunk-4I5CSDIA.js";import{b as le}from"./chunk-A76RTDNH.js";import{$a as de,Fb as Le,Tb as Ue,V as J,X as K,Z as S,ab as pe,cb as me,db as he,fb as xe,gb as be,jb as fe,mb as ue,nb as ze,ob as Ce,pb as ve,qb as we}from"./chunk-COHITK2X.js";import{Ba as h,Ca as x,Dd as Z,Fd as ee,Gc as H,Gd as te,Kd as k,Ld as ne,Md as ie,Nb as r,Ob as a,Pb as z,Pd as oe,Qb as M,Qd as re,Rb as N,Rd as ae,Tb as g,Td as f,Wb as m,Yb as d,a as $,ad as G,b as D,bd as j,cb as O,ec as T,f as mt,fc as _,gb as i,gc as p,hb as I,hc as C,ic as P,jd as q,lc as F,mc as A,nc as B,od as Y,pc as U,pd as Q,ra as L,rc as R,vb as u,vd as X,yc as y,zb as l}from"./chunk-HREO2FSK.js";var pt=mt(ht());var xt=c=>({count:c});function bt(c,n){if(c&1){let e=g();r(0,"button",13),m("click",function(){h(e);let o=d();return x(o.handleSync())}),_(1),a()}if(c&2){let e=d();l("nzLoading",e.syncLoading),i(),C(" ",e.$t("_save")," ")}}function ft(c,n){if(c&1){let e=g();r(0,"button",14),m("click",function(){h(e);let o=d();return x(o.handleReset())}),_(1),a()}if(c&2){let e=d();i(),C(" ",e.$t("_resetInitData")," ")}}function ut(c,n){c&1&&z(0,"i",42)}function zt(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",20),m("nzCheckedChange",function(o){let s=h(e).$implicit,b=d(2);return x(b.onItemChecked(s.title,o))}),a(),r(2,"td"),z(3,"app-logo",36),a(),r(4,"td"),_(5),a(),r(6,"td"),u(7,ut,1,0,"i",37),a(),r(8,"td"),_(9),a(),r(10,"td",38)(11,"a",39),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveOneUp(o))}),_(12),a(),r(13,"a",40),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveOneDown(o))}),_(14),a(),r(15,"a",40),m("click",function(){let o=h(e),s=o.$implicit,b=o.index,v=d(2);return x(v.handleEditBtn(s,b))}),_(16),a(),r(17,"a",41),m("nzOnConfirm",function(){let o=h(e).index,s=d(2);return x(s.handleConfirmDelOne(o))}),_(18),a()()()}if(c&2){let e=n.$implicit,t=d(2);i(),l("nzChecked",t.setOfCheckedId.has(e.title)),i(2),l("src",e.icon||"")("name",e.title),i(2),p(e.title),i(2),l("ngIf",e.ownVisible),i(2),p(e.createdAt),i(3),p(t.$t("_moveUp")),i(2),p(t.$t("_moveDown")),i(2),p(t.$t("_edit")),i(),l("nzPopconfirmTitle",t.$t("_delWarn")),i(),C(" ",t.$t("_del")," ")}}function Ct(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function vt(c,n){c&1&&z(0,"i",42)}function wt(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",20),m("nzCheckedChange",function(o){let s=h(e).$implicit,b=d(2);return x(b.onItemChecked(s.title,o))}),a(),r(2,"td"),z(3,"app-logo",36),a(),r(4,"td"),_(5),a(),r(6,"td"),u(7,vt,1,0,"i",37),a(),r(8,"td"),_(9),a(),r(10,"td",38)(11,"a",39),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveTwoUp(o))}),_(12),a(),r(13,"a",40),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveTwoDown(o))}),_(14),a(),r(15,"a",40),m("click",function(){let o=h(e),s=o.$implicit,b=o.index,v=d(2);return x(v.handleEditBtn(s,b))}),_(16),a(),r(17,"a",40),m("click",function(){let o=h(e),s=o.$implicit,b=o.index,v=d(2);return x(v.openMoveWebModal(s,b,2))}),_(18),a(),r(19,"a",41),m("nzOnConfirm",function(){let o=h(e).index,s=d(2);return x(s.handleConfirmDelTwo(o))}),_(20),a()()()}if(c&2){let e=n.$implicit,t=d(2);i(),l("nzChecked",t.setOfCheckedId.has(e.title||"")),i(2),l("src",e.icon||"")("name",e.title||""),i(2),p(e.title),i(2),l("ngIf",e.ownVisible),i(2),p(e.createdAt),i(3),p(t.$t("_moveUp")),i(2),p(t.$t("_moveDown")),i(2),p(t.$t("_edit")),i(2),p(t.$t("_move")),i(),l("nzPopconfirmTitle",t.$t("_delWarn")),i(),C(" ",t.$t("_del")," ")}}function gt(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function It(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title||"")("nzValue",e.title)}}function St(c,n){c&1&&z(0,"i",42)}function Tt(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",20),m("nzCheckedChange",function(o){let s=h(e).$implicit,b=d(2);return x(b.onItemChecked(s.title,o))}),a(),r(2,"td"),z(3,"app-logo",36),a(),r(4,"td"),_(5),a(),r(6,"td"),u(7,St,1,0,"i",37),a(),r(8,"td"),_(9),a(),r(10,"td",38)(11,"a",39),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveThreeUp(o))}),_(12),a(),r(13,"a",40),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveThreeDown(o))}),_(14),a(),r(15,"a",40),m("click",function(){let o=h(e),s=o.$implicit,b=o.index,v=d(2);return x(v.handleEditBtn(s,b))}),_(16),a(),r(17,"a",40),m("click",function(){let o=h(e),s=o.$implicit,b=o.index,v=d(2);return x(v.openMoveWebModal(s,b,3))}),_(18),a(),r(19,"a",41),m("nzOnConfirm",function(){let o=h(e).index,s=d(2);return x(s.handleConfirmDelThree(o))}),_(20),a()()()}if(c&2){let e=n.$implicit,t=d(2);i(),l("nzChecked",t.setOfCheckedId.has(e.title||"")),i(2),l("src",e.icon||"")("name",e.title||""),i(2),p(e.title),i(2),l("ngIf",e.ownVisible),i(2),p(e.createdAt),i(3),p(t.$t("_moveUp")),i(2),p(t.$t("_moveDown")),i(2),p(t.$t("_edit")),i(2),p(t.$t("_move")),i(),l("nzPopconfirmTitle",t.$t("_delWarn")),i(),C(" ",t.$t("_del")," ")}}function yt(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function kt(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title||"")("nzValue",e.title)}}function Et(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title||"")("nzValue",e.title||"")}}function Vt(c,n){if(c&1){let e=g();r(0,"div")(1,"a",39),m("click",function(){h(e);let o=d().index,s=d(2);return x(s.moveWebUp(o))}),_(2),a()()}if(c&2){let e=d(3);i(2),p(e.$t("_moveUp"))}}function Wt(c,n){if(c&1){let e=g();r(0,"div")(1,"a",39),m("click",function(){h(e);let o=d().index,s=d(2);return x(s.moveWebDown(o))}),_(2),a()()}if(c&2){let e=d(3);i(2),p(e.$t("_moveDown"))}}function $t(c,n){if(c&1){let e=g();r(0,"div")(1,"a",39),m("click",function(){h(e);let o=d(),s=o.$implicit,b=o.index,v=d(2);return x(v.openMoveWebModal(s,b))}),_(2),a()()}if(c&2){let e=d(3);i(2),p(e.$t("_move"))}}function Dt(c,n){c&1&&z(0,"span",52)}function Lt(c,n){if(c&1&&z(0,"app-logo",36),c&2){let e=d().$implicit;l("src",e.icon)("name",e.name)}}function Ot(c,n){if(c&1&&z(0,"tag-list",53),c&2){let e=d().$implicit;l("data",e.tags)}}function Mt(c,n){c&1&&z(0,"i",42)}function Nt(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",20),m("nzCheckedChange",function(o){let s=h(e).$implicit,b=d(2);return x(b.onItemChecked(s.name,o))}),a(),r(2,"td",44),u(3,Vt,3,1,"div",45)(4,Wt,3,1,"div",45),r(5,"a",39),m("click",function(){let o=h(e).$implicit,s=d(2);return x(s.openEditModal(o))}),_(6),a(),u(7,$t,3,1,"div",45),r(8,"a",46),m("nzOnConfirm",function(){let o=h(e),s=o.$implicit,b=o.index,v=d(2);return x(v.handleConfirmDelWebsite(s,b))}),_(9),a()(),r(10,"td"),u(11,Dt,1,0,"span",47),a(),r(12,"td"),u(13,Lt,1,2,"app-logo",48),a(),r(14,"td")(15,"a",49),_(16),a()(),r(17,"td"),u(18,Ot,1,1,"tag-list",50),a(),r(19,"td"),u(20,Mt,1,0,"i",37),a(),r(21,"td")(22,"pre",51),_(23),a()(),r(24,"th",35),_(25),a(),r(26,"td"),_(27),a()()}if(c&2){let e=n.$implicit,t=d(2);i(),l("nzChecked",t.setOfCheckedId.has(e.name)),i(2),l("ngIf",t.errorWebs.length<=0),i(),l("ngIf",t.errorWebs.length<=0),i(2),p(t.$t("_edit")),i(),l("ngIf",t.errorWebs.length<=0),i(),l("nzPopconfirmTitle",t.$t("_confirmDel")),i(),C(" ",t.$t("_del")," "),i(2),l("ngIf",e.ok===!1),i(2),l("ngIf",e.icon),i(2),l("href",e.url,O),i(),p(e.name),i(2),l("ngIf",e.tags),i(2),l("ngIf",e.ownVisible),i(3),p(e.desc),i(2),p(e.breadcrumb),i(2),p(e.createdAt)}}function Pt(c,n){if(c&1){let e=g();r(0,"nz-tabset",15),m("nzSelectedIndexChange",function(o){h(e);let s=d();return x(s.onTabChange(o))}),r(1,"nz-tab",16)(2,"button",17),m("click",function(){h(e);let o=d();return x(o.toggleCreateModal())}),_(3),a(),r(4,"button",18),m("nzOnConfirm",function(){h(e);let o=d();return x(o.onBatchDelete(1))}),_(5),a(),r(6,"nz-table",19,0)(9,"thead")(10,"tr")(11,"th",20),m("nzCheckedChange",function(o){h(e);let s=d();return x(s.onAllChecked(o,1))}),a(),r(12,"th"),_(13),a(),r(14,"th"),_(15),a(),r(16,"th"),_(17),a(),r(18,"th"),_(19),a(),r(20,"th"),_(21),a()()(),r(22,"tbody"),u(23,zt,19,11,"tr",21),a()()(),r(24,"nz-tab",16)(25,"nz-select",22),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeOneSelect(o))}),u(26,Ct,1,2,"nz-option",23),a(),r(27,"button",24),m("click",function(){h(e);let o=d();return x(o.toggleCreateModal())}),_(28),a(),r(29,"button",18),m("nzOnConfirm",function(){h(e);let o=d();return x(o.onBatchDelete(2))}),_(30),a(),r(31,"nz-table",19,0)(34,"thead")(35,"tr")(36,"th",20),m("nzCheckedChange",function(o){h(e);let s=d();return x(s.onAllChecked(o,2))}),a(),r(37,"th"),_(38),a(),r(39,"th"),_(40),a(),r(41,"th"),_(42),a(),r(43,"th"),_(44),a(),r(45,"th"),_(46),a()()(),r(47,"tbody"),u(48,wt,21,12,"tr",21),a()()(),r(49,"nz-tab",16)(50,"nz-select",25),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeOneSelect(o))}),u(51,gt,1,2,"nz-option",23),a(),r(52,"nz-select",26),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeTwoSelect(o))}),u(53,It,1,2,"nz-option",23),a(),r(54,"button",24),m("click",function(){h(e);let o=d();return x(o.toggleCreateModal())}),_(55),a(),r(56,"button",18),m("nzOnConfirm",function(){h(e);let o=d();return x(o.onBatchDelete(3))}),_(57),a(),r(58,"nz-table",19,0)(61,"thead")(62,"tr")(63,"th",20),m("nzCheckedChange",function(o){h(e);let s=d();return x(s.onAllChecked(o,3))}),a(),r(64,"th"),_(65),a(),r(66,"th"),_(67),a(),r(68,"th"),_(69),a(),r(70,"th"),_(71),a(),r(72,"th"),_(73),a()()(),r(74,"tbody"),u(75,Tt,21,12,"tr",21),a()()(),r(76,"nz-tab",16)(77,"nz-select",27),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeOneSelect(o))}),u(78,yt,1,2,"nz-option",23),a(),r(79,"nz-select",28),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeTwoSelect(o))}),u(80,kt,1,2,"nz-option",23),a(),r(81,"nz-select",28),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeThreeSelect(o))}),u(82,Et,1,2,"nz-option",23),a(),r(83,"button",24),m("click",function(){h(e);let o=d();return x(o.openCreateWebModal())}),_(84),a(),r(85,"button",24),m("click",function(){h(e);let o=d();return x(o.getAllErrorWeb())}),_(86),a(),r(87,"button",18),m("nzOnConfirm",function(){h(e);let o=d();return x(o.onBatchDelete(4))}),_(88),a(),r(89,"nz-table",19,0)(92,"thead")(93,"tr")(94,"th",29),m("nzCheckedChange",function(o){h(e);let s=d();return x(s.onAllChecked(o,4))}),a(),r(95,"th",30),_(96),a(),r(97,"th",31),_(98),a(),r(99,"th",32),_(100),a(),r(101,"th",33),_(102),a(),r(103,"th",33),_(104),a(),r(105,"th",34),_(106),a(),r(107,"th",35),_(108),a(),r(109,"th",35),_(110),a(),r(111,"th"),_(112),a()()(),r(113,"tbody"),u(114,Nt,28,16,"tr",21),a()()()()}if(c&2){let e=d();l("nzSelectedIndex",e.tabActive),i(),l("nzTitle",e.$t("_mgr1")),i(2),C(" ",e.$t("_addTag")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.websiteList)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),p(e.$t("_icon")),i(2),p(e.$t("_tagName")),i(2),p(e.$t("_onlyOwnVisible")),i(2),p(e.$t("_createAt")),i(2),p(e.$t("_action")),i(2),l("ngForOf",e.websiteList),i(),l("nzTitle",e.$t("_mgr2")),i(),l("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),l("ngForOf",e.websiteList),i(2),C(" ",e.$t("_addTag")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.twoTableData)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),p(e.$t("_icon")),i(2),p(e.$t("_tagName")),i(2),p(e.$t("_onlyOwnVisible")),i(2),p(e.$t("_createAt")),i(2),p(e.$t("_action")),i(2),l("ngForOf",e.twoTableData),i(),l("nzTitle",e.$t("_mgr3")),i(),l("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),l("ngForOf",e.websiteList),i(),l("ngModel",e.twoSelect)("nzPlaceHolder",e.$t("_sel2")),i(),l("ngForOf",e.twoTableData),i(2),C(" ",e.$t("_addTag")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.threeTableData)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),p(e.$t("_icon")),i(2),p(e.$t("_tagName")),i(2),p(e.$t("_onlyOwnVisible")),i(2),p(e.$t("_createAt")),i(2),p(e.$t("_action")),i(2),l("ngForOf",e.threeTableData),i(),l("nzTitle",e.$t("_mgrWeb")+"\uFF08"+e.internal.loginViewCount+"\uFF09"),i(),l("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),l("ngForOf",e.websiteList),i(),l("ngModel",e.twoSelect)("nzPlaceHolder",e.$t("_sel2")),i(),l("ngForOf",e.twoTableData),i(),l("ngModel",e.threeSelect)("nzPlaceHolder",e.$t("_sel3")),i(),l("ngForOf",e.threeTableData),i(2),P(" ",e.$t("_addWeb"),"\uFF08",e.websiteTableData.length,"\uFF09 "),i(2),C(" ",e.$t("_getErrorWeb")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.websiteTableData)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),p(e.$t("_action")),i(2),p(e.$t("_status")),i(2),p(e.$t("_icon")),i(2),p(e.$t("_webName")),i(2),p(e.$t("_associatedLabels")),i(2),p(e.$t("_onlyOwnVisible")),i(2),p(e.$t("_webDesc")),i(2),p(e.$t("_webTag")),i(2),p(e.$t("_createAt")),i(2),l("ngForOf",e.websiteTableData)}}function Ft(c,n){if(c&1&&z(0,"app-logo",63),c&2){let e=d(3);l("src",e.iconUrl)("size",25)}}function At(c,n){if(c&1&&u(0,Ft,1,2,"app-logo",62),c&2){let e=d(2);l("ngIf",e.iconUrl)}}function Bt(c,n){if(c&1){let e=g();r(0,"app-upload",64),m("onChange",function(o){h(e);let s=d(2);return x(s.onChangeFile(o))}),a()}}function Ut(c,n){if(c&1&&(M(0),r(1,"form",54)(2,"nz-form-item")(3,"nz-form-label",55),_(4,"\u5206\u7C7B\u540D\u79F0"),a(),r(5,"nz-form-control",56),z(6,"input",57),a()(),r(7,"nz-form-item")(8,"nz-form-label",55),_(9),a(),r(10,"nz-form-control",58),z(11,"nz-switch",59),a()(),r(12,"nz-form-item")(13,"nz-form-label",58),_(14,"\u56FE\u6807\u5730\u5740"),a(),r(15,"nz-form-control",58)(16,"nz-input-group",60),z(17,"input",61),a(),u(18,At,1,1,"ng-template",null,1,y)(20,Bt,1,0,"ng-template",null,2,y),a()()(),N()),c&2){let e=T(19),t=T(21),o=d();i(),l("formGroup",o.validateForm),i(2),l("nzSpan",6),i(2),l("nzSpan",18)("nzErrorTip",o.$t("_requiredName")),i(),l("placeholder",o.$t("_webTitle")),i(2),l("nzSpan",6),i(),p(o.$t("_onlyOwnVisible")),i(),l("nzSpan",18),i(3),l("nzSpan",6),i(2),l("nzSpan",18),i(),l("nzPrefix",e)("nzSuffix",t)}}var W=class c{constructor(n,e,t,o,s){this.fb=n;this.modal=e;this.notification=t;this.message=o;this.cdr=s;this.validateForm=this.fb.group({title:["",[pe.required]],icon:[""],ownVisible:[!1]})}$t=f;isSelfDevelop=te;settings=k;internal=oe;validateForm;websiteList=re;gitRepoUrl=Y.gitRepoUrl;isLogin=ee;showCreateModal=!1;syncLoading=!1;uploading=!1;tabActive=0;editIdx=0;isEdit=!1;oneSelect="";twoSelect="";threeSelect="";checkedAll=!1;setOfCheckedId=new Set;errorWebs=[];ngOnInit(){}get oneIndex(){return this.websiteList.findIndex(n=>n.title===this.oneSelect)}get twoIndex(){try{return this.twoTableData.findIndex(n=>n.title===this.twoSelect)}catch{return-1}}get threeIndex(){try{return this.threeTableData.findIndex(n=>n.title===this.threeSelect)}catch{return-1}}get twoTableData(){try{return this.websiteList.find(n=>n.title===this.oneSelect)?.nav||[]}catch{return[]}}get threeTableData(){try{return this.twoTableData.find(n=>n.title===this.twoSelect)?.nav||[]}catch{return[]}}get websiteTableData(){try{let n=this.threeTableData.find(e=>e.title===this.threeSelect);return n?n.nav:this.errorWebs}catch{return this.errorWebs}}getAllErrorWeb(){this.oneSelect="",this.twoSelect="",this.threeSelect="",this.onTabChange();let n=[];function e(t){if(Array.isArray(t))for(let o=0;o<t.length;o++){let s=t[o];s.url&&s.ok===!1?n.push(s):e(s.nav)}}e(this.websiteList),this.errorWebs=n,n.length<=0?this.message.success("No error!"):this.message.warning(`\u68C0\u6D4B\u51FA ${n.length} \u4E2A\u7F51\u7AD9\u7591\u4F3C\u5F02\u5E38`)}onAllChecked(n,e){switch(this.setOfCheckedId.clear(),e){case 1:this.websiteList.forEach(t=>{n?this.setOfCheckedId.add(t.title):this.setOfCheckedId.delete(t.title)});break;case 2:this.twoTableData.forEach(t=>{n?this.setOfCheckedId.add(t.title):this.setOfCheckedId.delete(t.title)});break;case 3:this.threeTableData.forEach(t=>{n?this.setOfCheckedId.add(t.title):this.setOfCheckedId.delete(t.title)});break;case 4:this.websiteTableData.forEach(t=>{n?this.setOfCheckedId.add(t.name):this.setOfCheckedId.delete(t.name)});break}}onItemChecked(n,e){e?this.setOfCheckedId.add(n):this.setOfCheckedId.delete(n)}onBatchDelete(n){switch(n){case 1:this.setOfCheckedId.forEach(e=>{let t=this.websiteList.findIndex(o=>o.title===e);t>=0&&this.websiteList.splice(t,1)});break;case 2:this.oneIndex>=0&&(this.websiteList[this.oneIndex].nav=this.websiteList[this.oneIndex].nav.filter(e=>!this.setOfCheckedId.has(e.title)));break;case 3:this.oneIndex>=0&&this.twoIndex>=0&&(this.websiteList[this.oneIndex].nav[this.twoIndex].nav=this.websiteList[this.oneIndex].nav[this.twoIndex].nav.filter(e=>!this.setOfCheckedId.has(e.title)));break;case 4:{let e=[];this.websiteTableData.forEach(t=>{let o=!this.setOfCheckedId.has(t.name);return o||e.push(t),o}),e.forEach(t=>{V(D($({},t),{name:E(t.name),desc:E(t.desc)}))}),this.errorWebs.length&&this.getAllErrorWeb(),this.message.success(f("_delSuccess"))}break}this.onTabChange(),w(this.websiteList)}handleReset(){this.modal.info({nzTitle:f("_resetInitData"),nzContent:f("_warnReset"),nzOnOk:()=>{this.message.success(f("_actionSuccess")),window.localStorage.removeItem(X.s_url),Z().finally(()=>{window.location.reload()})}})}handleDownloadBackup(){let n={db:this.websiteList,settings:k,tag:ie,search:ne,component:ae};for(let e in n)(0,pt.saveAs)(new Blob([JSON.stringify(n[e])],{type:"text/plain;charset=utf-8"}),`${e}.json`)}handleUploadBackup(n){let e=this,t=n.target.files;if(t.length<=0)return;let o=t[0],s=new FileReader;s.readAsText(o),s.onload=function(b){try{let{result:v}=b.target;e.websiteList=JSON.parse(v),e.message.success(f("_actionSuccess")),w(e.websiteList).finally(()=>{location.reload()})}catch(v){e.notification.error(f("_error"),v.message)}}}goBack(){history.go(-1)}openMoveWebModal(n,e,t){S.emit("MOVE_WEB",{indexs:[this.oneIndex,this.twoIndex,this.threeIndex,e],data:[n],level:t})}openCreateWebModal(){if(this.tabActive===3&&!this.threeSelect)return this.message.error(f("_sel3"));S.emit("CREATE_WEB",{oneIndex:this.oneIndex,twoIndex:this.twoIndex,threeIndex:this.threeIndex})}openEditModal(n){S.emit("CREATE_WEB",{detail:n})}toggleCreateModal(){if(!this.showCreateModal){if(this.tabActive===1&&!this.oneSelect)return this.message.error(f("_sel1"));if(this.tabActive===2&&!this.twoSelect)return this.message.error(f("_sel2"))}this.isEdit=!1,this.showCreateModal=!this.showCreateModal,this.validateForm.reset()}onTabChange(n){this.errorWebs=[],this.tabActive=n??this.tabActive,this.setOfCheckedId.clear(),this.checkedAll||setTimeout(()=>{this.checkedAll=!this.checkedAll,setTimeout(()=>{this.checkedAll=!this.checkedAll})}),this.cdr.markForCheck()}handleConfirmDelOne(n){this.websiteList.splice(n,1),this.message.success(f("_delSuccess")),w(this.websiteList)}moveOneUp(n){if(n===0)return;let e=this.websiteList[n],t=this.websiteList[n-1];this.websiteList[n-1]=e,this.websiteList[n]=t,w(this.websiteList)}moveOneDown(n){if(n===this.websiteList.length-1)return;let e=this.websiteList[n],t=this.websiteList[n+1];this.websiteList[n+1]=e,this.websiteList[n]=t,w(this.websiteList)}moveTwoUp(n){try{if(n===0)return;let e=this.websiteList[this.oneIndex].nav[n],t=this.websiteList[this.oneIndex].nav[n-1];this.websiteList[this.oneIndex].nav[n-1]=e,this.websiteList[this.oneIndex].nav[n]=t,w(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}moveTwoDown(n){try{if(n===this.websiteList[this.oneIndex].nav.length-1)return;let e=this.websiteList[this.oneIndex].nav[n],t=this.websiteList[this.oneIndex].nav[n+1];this.websiteList[this.oneIndex].nav[n+1]=e,this.websiteList[this.oneIndex].nav[n]=t,w(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}handleConfirmDelTwo(n){this.twoTableData.splice(n,1),this.message.success(f("_delSuccess")),w(this.websiteList)}moveThreeUp(n){try{if(n===0)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n-1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n-1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n]=t,w(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}moveThreeDown(n){try{if(n===this.websiteList[this.oneIndex].nav[this.twoIndex].nav.length-1)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n+1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n+1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n]=t,w(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}handleConfirmDelThree(n){this.threeTableData.splice(n,1),this.message.success(f("_delSuccess")),w(this.websiteList)}moveWebUp(n){try{if(n===0)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n-1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n-1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n]=t,w(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}moveWebDown(n){try{if(n===this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav.length-1)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n+1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n+1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n]=t,w(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}handleConfirmDelWebsite(n,e){V(n)&&(this.message.success(f("_delSuccess")),this.errorWebs.length&&this.getAllErrorWeb())}hanldeOneSelect(n){this.oneSelect=n??this.oneSelect,this.twoSelect="",this.threeSelect="",this.onTabChange()}hanldeTwoSelect(n){this.twoSelect=n??this.twoSelect,this.threeSelect="",this.onTabChange()}hanldeThreeSelect(n){this.threeSelect=n??this.threeSelect,this.onTabChange()}handleEditBtn(n,e){let{title:t,icon:o,name:s,ownVisible:b}=n;this.toggleCreateModal(),this.isEdit=!0,this.editIdx=e,this.validateForm.get("title").setValue(t||s||""),this.validateForm.get("icon").setValue(o||""),this.validateForm.get("ownVisible").setValue(!!b)}onChangeFile(n){this.validateForm.get("icon").setValue(n.cdn)}get iconUrl(){return this.validateForm.get("icon")?.value||""}handleSync(){this.modal.info({nzTitle:f("_syncDataOut"),nzOkText:f("_confirmSync"),nzContent:f("_confirmSyncTip"),nzOnOk:()=>{this.syncLoading=!0,Le({message:"update db",content:JSON.stringify(this.websiteList),path:Q}).then(()=>{this.message.success(f("_syncSuccessTip"))}).finally(()=>{this.syncLoading=!1})}})}handleOk(){let n=Date.now();for(let s in this.validateForm.controls)this.validateForm.controls[s].markAsDirty(),this.validateForm.controls[s].updateValueAndValidity();let{title:e,icon:t,ownVisible:o}=this.validateForm.value;if(!e||!e.trim()){this.message.error("\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}if(e=e.trim(),this.isEdit){switch(this.tabActive){case 0:{if(this.websiteList.some(b=>b.title===e)&&this.websiteList[this.editIdx].title!==e)return this.message.error(`${f("_repeatAdd")} "${e}"`);this.websiteList[this.editIdx].title=e,this.websiteList[this.editIdx].icon=t,this.websiteList[this.editIdx].ownVisible=o}break;case 1:{if(this.twoTableData.some(b=>b.title===e)&&this.twoTableData[this.editIdx].title!==e)return this.message.error(`${f("_repeatAdd")} "${e}"`);this.twoTableData[this.editIdx].title=e,this.twoTableData[this.editIdx].icon=t,this.twoTableData[this.editIdx].ownVisible=o}break;case 2:{if(this.threeTableData.some(b=>b.title===e)&&this.threeTableData[this.editIdx].title!==e)return this.message.error(`${f("_repeatAdd")} "${e}"`);this.threeTableData[this.editIdx].title=e,this.threeTableData[this.editIdx].icon=t,this.threeTableData[this.editIdx].ownVisible=o}break}this.message.success(f("_saveSuccess"))}else{switch(this.tabActive){case 0:{if(this.websiteList.some(b=>b.title===e))return this.message.error(`${f("_repeatAdd")} "${e}"`);this.websiteList.unshift({createdAt:n,title:e,icon:t,ownVisible:o,nav:[]})}break;case 1:{if(this.twoTableData.some(b=>b.title===e))return this.message.error(`${f("_repeatAdd")} "${e}"`);this.twoTableData.unshift({createdAt:n,title:e,icon:t,ownVisible:o,nav:[]})}break;case 2:{if(this.threeTableData.some(b=>b.title===e))return this.message.error(`${f("_repeatAdd")} "${e}"`);this.threeTableData.unshift({createdAt:n,title:e,icon:t,ownVisible:o,nav:[]})}break}this.message.success(f("_addSuccess"))}this.validateForm.reset(),this.toggleCreateModal(),w(this.websiteList)}static \u0275fac=function(e){return new(e||c)(I(Ce),I(Pe),I(Ge),I(Ue),I(H))};static \u0275cmp=L({type:c,selectors:[["app-admin"]],standalone:!0,features:[U],decls:13,vars:11,consts:[["rowSelectionTable","","basicTable",""],["prefixIcon",""],["suffixIconSearch",""],[1,"admin"],["nz-button","","nzType","primary",3,"nzLoading","click",4,"ngIf"],["nz-button","","style","margin: 0 15px 20px 15px",3,"click",4,"ngIf"],["nz-button","",2,"margin-right","15px",3,"click"],["id","file2","nz-button","","nz-tooltip","","nzTooltipPlacement","bottom",3,"nzTooltipTitle"],["type","file","name","file2","accept",".json",1,"file-upload",3,"change"],[1,"tip2"],[3,"nzSelectedIndex","nzSelectedIndexChange",4,"ngIf"],[3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzTitle"],[4,"nzModalContent"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nz-button","",2,"margin","0 15px 20px 15px",3,"click"],[3,"nzSelectedIndexChange","nzSelectedIndex"],[3,"nzTitle"],["nz-button","","nzType","primary",3,"click"],["nz-popconfirm","","nzPopconfirmPlacement","bottom","nz-button","","nzDanger","",1,"ml-2.5",3,"nzOnConfirm","nzPopconfirmTitle","disabled"],[2,"margin-top","15px",3,"nzData","nzShowPagination"],[3,"nzCheckedChange","nzChecked"],[4,"ngFor","ngForOf"],["nzShowSearch","",2,"width","260px",3,"ngModelChange","ngModel","nzPlaceHolder"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",2,"margin-left","20px",3,"click"],["nzShowSearch","",2,"width","200px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","200px","margin-left","15px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","150px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","150px","margin-left","15px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzWidth","70px",3,"nzCheckedChange","nzChecked"],["nzWidth","60px",1,"text-center"],["nzWidth","70px"],["nzWidth","80px"],["nzWidth","100px"],["nzWidth","120px"],["nzWidth","300px"],[3,"src","name"],["nz-icon","","nzType","check","nzTheme","outline",4,"ngIf"],[1,"select-none"],[3,"click"],[1,"ml-2.5",3,"click"],["nz-popconfirm","","nzPopconfirmPlacement","bottom",1,"color-red","ml-2.5",3,"nzOnConfirm","nzPopconfirmTitle"],["nz-icon","","nzType","check","nzTheme","outline"],[3,"nzLabel","nzValue"],[1,"text-center","select-none"],[4,"ngIf"],["nz-popconfirm","","nzPopconfirmPlacement","bottom",1,"color-red",3,"nzOnConfirm","nzPopconfirmTitle"],["nz-icon","","nzType","close","nzTheme","outline","style","color: red",4,"ngIf"],[3,"src","name",4,"ngIf"],["target","_blank",3,"href"],[3,"data",4,"ngIf"],[1,"desc"],["nz-icon","","nzType","close","nzTheme","outline",2,"color","red"],[3,"data"],["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["formControlName","title","nz-input","","maxlength","50",3,"placeholder"],[3,"nzSpan"],["formControlName","ownVisible"],[3,"nzPrefix","nzSuffix"],["formControlName","icon","nz-input","","placeholder","\u7528\u4E8E\u67D0\u4E9B\u4E3B\u9898icon"],[3,"src","size",4,"ngIf"],[3,"src","size"],[3,"onChange"]],template:function(e,t){e&1&&(r(0,"div",3),u(1,bt,2,2,"button",4)(2,ft,2,1,"button",5),r(3,"button",6),m("click",function(){return t.handleDownloadBackup()}),_(4),a(),r(5,"label",7),_(6),r(7,"input",8),m("change",function(s){return t.handleUploadBackup(s)}),a()(),r(8,"div",9),_(9),a(),u(10,Pt,115,81,"nz-tabset",10),a(),r(11,"nz-modal",11),B("nzVisibleChange",function(s){return A(t.showCreateModal,s)||(t.showCreateModal=s),s}),m("nzOnCancel",function(){return t.toggleCreateModal()})("nzOnOk",function(){return t.handleOk()}),u(12,Ut,22,12,"ng-container",12),a()),e&2&&(i(),l("ngIf",!t.isSelfDevelop),i(),l("ngIf",!t.isSelfDevelop),i(2),C(" ",t.$t("_backup")," "),i(),l("nzTooltipTitle",t.$t("_importBackupTip")),i(),C(" ",t.$t("_importBackup")," "),i(3),C(" ",t.$t("_errCountTip",R(9,xt,t.settings.errorUrlCount||0))," "),i(),l("ngIf",t.isLogin),i(),F("nzVisible",t.showCreateModal),l("nzTitle",t.isEdit?t.$t("_edit"):t.$t("_add")))},dependencies:[q,G,j,ke,ye,ve,be,de,me,he,ze,xe,we,fe,ue,Te,ge,Se,Ie,_e,ce,se,le,De,nt,Ze,Je,Ye,Ke,tt,Xe,et,Qe,dt,_t,ct,Ne,Me,We,Ee,Ve,$e,K,J,Be,Ae,Fe,lt,He,Re,rt,ot,st,at,qe,je,it,Oe],styles:[".desc[_ngcontent-%COMP%]{width:300px;white-space:pre-wrap;word-break:break-all}#file2[_ngcontent-%COMP%]{position:relative;cursor:pointer}#file2[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:1px;opacity:0;cursor:pointer}.tip2[_ngcontent-%COMP%]{color:#f50;font-weight:700;margin-top:10px}.admin[_ngcontent-%COMP%]     .ant-table{max-height:600px;overflow:auto}"],changeDetection:0})};export{W as default};
