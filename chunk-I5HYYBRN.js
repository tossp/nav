import{d}from"./chunk-2EWEL7MI.js";import{Fb as h,Z as g}from"./chunk-7IAC7Q3X.js";import{Fd as u,Gd as m,Qd as a,Td as v,f as P,od as c,pd as b,vd as f,wd as S}from"./chunk-7XHXL7AS.js";var p=P(S());function w(e){function o(n){return!(n.ownVisible&&!u)}e=e.filter(o);for(let n=0;n<e.length;n++){let t=e[n];Array.isArray(t.nav)&&(t.nav=t.nav.filter(o),w(t.nav))}return e}async function E(){if(m)return;function e(t){t.forEach(r=>{a.push(r)}),g.emit("WEB_FINISH"),window.__FINISHED__=!0}let o=w(a);if(a.splice(0,a.length),!u)return e(o);if(window.localStorage.getItem(f.s_url)!==c.datetime){let t=[f.token,f.isDark,f.authCode],r=window.localStorage.length;for(let i=0;i<r;i++){let l=window.localStorage.key(i);t.includes(l)||window.localStorage.removeItem(l)}window.localStorage.setItem(f.s_url,c.datetime),p.default.removeItem(f.website),e(o),u&&setTimeout(()=>{g.emit("NOTIFICATION",{type:"success",title:v("_buildSuccess"),content:c.datetime,config:{nzDuration:0}})},1e3);return}try{let t=await p.default.getItem(f.website)||o;e(t)}catch{e(o)}}function y(e){return e=e||a,m?h({content:JSON.stringify(e),path:b}):p.default.setItem(f.website,e)}function T(e){e||=a;let{page:o,id:n}=d(),t=!e[o].nav[n].collapsed;return e[o].nav[n].collapsed=t,e[o].nav[n].nav.map(r=>(r.collapsed=t,r)),m||y(e),t}function B(e){let o=!1;function n(t){for(let r=0;r<t.length;r++){let i=t[r];if(i.name){if(i.id===e.id){o=!0,t.splice(r,1);break}continue}Array.isArray(i.nav)&&(i.nav=i.nav.filter(l=>l.name&&l.id===e.id?(o=!0,!1):!0),n(i.nav))}}if(n(a),o){y(a);let{q:t}=d();t&&window.location.reload()}return o}function F(e,o){let n=Object.keys(o),t=!1;function r(i){for(let l=0;l<i.length;l++){let s=i[l];if(s.name){if(s.id===e.id){t=!0;for(let I of n)s[I]=o[I];break}continue}Array.isArray(s.nav)&&r(s.nav)}}return r(a),y(a),t}export{E as a,y as b,T as c,B as d,F as e};
